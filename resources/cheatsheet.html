<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Gov 50 - Gov 50 Cheat Sheet</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../files/img/gov50-icon-512.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Gov 50</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule.html" rel="" target="">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../staff.html" rel="" target="">
 <span class="menu-text">Staff</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../materials/index.html" rel="" target="">
 <span class="menu-text">Materials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../assignments/index.html" rel="" target="">
 <span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../resources/index.html" rel="" target="">
 <span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://edstem.org/us/courses/43339/discussion/" rel="" target="">
 <span class="menu-text">Ed</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.gradescope.com/courses/544769" rel="" target="">
 <span class="menu-text">Gradescope</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#r-basics-week-1" id="toc-r-basics-week-1" class="nav-link active" data-scroll-target="#r-basics-week-1">R Basics (Week 1)</a>
  <ul class="collapse">
  <li><a href="#creating-a-vector" id="toc-creating-a-vector" class="nav-link" data-scroll-target="#creating-a-vector">Creating a vector</a></li>
  <li><a href="#installing-and-loading-a-package" id="toc-installing-and-loading-a-package" class="nav-link" data-scroll-target="#installing-and-loading-a-package">Installing and loading a package</a></li>
  <li><a href="#calling-functions-from-specific-packages" id="toc-calling-functions-from-specific-packages" class="nav-link" data-scroll-target="#calling-functions-from-specific-packages">Calling functions from specific packages</a></li>
  </ul></li>
  <li><a href="#data-visualization-week-2" id="toc-data-visualization-week-2" class="nav-link" data-scroll-target="#data-visualization-week-2">Data Visualization (Week 2)</a>
  <ul class="collapse">
  <li><a href="#scatter-plot" id="toc-scatter-plot" class="nav-link" data-scroll-target="#scatter-plot">Scatter plot</a></li>
  <li><a href="#smoothed-curves" id="toc-smoothed-curves" class="nav-link" data-scroll-target="#smoothed-curves">Smoothed curves</a></li>
  <li><a href="#adding-a-regression-line" id="toc-adding-a-regression-line" class="nav-link" data-scroll-target="#adding-a-regression-line">Adding a regression line</a></li>
  <li><a href="#changing-the-scale-of-the-axes" id="toc-changing-the-scale-of-the-axes" class="nav-link" data-scroll-target="#changing-the-scale-of-the-axes">Changing the scale of the axes</a></li>
  <li><a href="#adding-informative-labels-to-a-plot" id="toc-adding-informative-labels-to-a-plot" class="nav-link" data-scroll-target="#adding-informative-labels-to-a-plot">Adding informative labels to a plot</a></li>
  <li><a href="#mapping-aesthetics-to-variables" id="toc-mapping-aesthetics-to-variables" class="nav-link" data-scroll-target="#mapping-aesthetics-to-variables">Mapping aesthetics to variables</a></li>
  <li><a href="#mapping-aesthetics-for-a-single-geom" id="toc-mapping-aesthetics-for-a-single-geom" class="nav-link" data-scroll-target="#mapping-aesthetics-for-a-single-geom">Mapping aesthetics for a single geom</a></li>
  <li><a href="#setting-the-aesthetics-for-all-observations" id="toc-setting-the-aesthetics-for-all-observations" class="nav-link" data-scroll-target="#setting-the-aesthetics-for-all-observations">Setting the aesthetics for all observations</a></li>
  <li><a href="#histograms" id="toc-histograms" class="nav-link" data-scroll-target="#histograms">Histograms</a></li>
  </ul></li>
  <li><a href="#data-wrangling-week-2-3" id="toc-data-wrangling-week-2-3" class="nav-link" data-scroll-target="#data-wrangling-week-2-3">Data Wrangling (week 2-3)</a>
  <ul class="collapse">
  <li><a href="#subsetting-a-data-frame" id="toc-subsetting-a-data-frame" class="nav-link" data-scroll-target="#subsetting-a-data-frame">Subsetting a data frame</a></li>
  <li><a href="#filtering-to-the-largestsmallest-values-of-a-variable" id="toc-filtering-to-the-largestsmallest-values-of-a-variable" class="nav-link" data-scroll-target="#filtering-to-the-largestsmallest-values-of-a-variable">Filtering to the largest/smallest values of a variable</a></li>
  <li><a href="#sorting-rows-by-a-variable" id="toc-sorting-rows-by-a-variable" class="nav-link" data-scroll-target="#sorting-rows-by-a-variable">Sorting rows by a variable</a></li>
  <li><a href="#selectingsubsetting-the-columns" id="toc-selectingsubsetting-the-columns" class="nav-link" data-scroll-target="#selectingsubsetting-the-columns">Selecting/subsetting the columns</a></li>
  <li><a href="#renaming-a-variable" id="toc-renaming-a-variable" class="nav-link" data-scroll-target="#renaming-a-variable">Renaming a variable</a></li>
  <li><a href="#creating-new-variables" id="toc-creating-new-variables" class="nav-link" data-scroll-target="#creating-new-variables">Creating new variables</a></li>
  <li><a href="#creating-new-variables-based-on-yesno-conditions" id="toc-creating-new-variables-based-on-yesno-conditions" class="nav-link" data-scroll-target="#creating-new-variables-based-on-yesno-conditions">Creating new variables based on yes/no conditions</a></li>
  <li><a href="#summarizing-a-variable" id="toc-summarizing-a-variable" class="nav-link" data-scroll-target="#summarizing-a-variable">Summarizing a variable</a></li>
  <li><a href="#summarizing-variables-by-groups-of-rows" id="toc-summarizing-variables-by-groups-of-rows" class="nav-link" data-scroll-target="#summarizing-variables-by-groups-of-rows">Summarizing variables by groups of rows</a></li>
  <li><a href="#summarizing-by-multiple-variables" id="toc-summarizing-by-multiple-variables" class="nav-link" data-scroll-target="#summarizing-by-multiple-variables">Summarizing by multiple variables</a></li>
  <li><a href="#summarizing-across-many-variables" id="toc-summarizing-across-many-variables" class="nav-link" data-scroll-target="#summarizing-across-many-variables">Summarizing across many variables</a></li>
  <li><a href="#table-of-counts-of-a-categorical-variable" id="toc-table-of-counts-of-a-categorical-variable" class="nav-link" data-scroll-target="#table-of-counts-of-a-categorical-variable">Table of counts of a categorical variable</a></li>
  <li><a href="#producing-nicely-formatted-tables-with-kable" id="toc-producing-nicely-formatted-tables-with-kable" class="nav-link" data-scroll-target="#producing-nicely-formatted-tables-with-kable">Producing nicely formatted tables with <code>kable()</code></a></li>
  <li><a href="#barplots-of-counts" id="toc-barplots-of-counts" class="nav-link" data-scroll-target="#barplots-of-counts">Barplots of counts</a></li>
  <li><a href="#barplots-of-other-summaries" id="toc-barplots-of-other-summaries" class="nav-link" data-scroll-target="#barplots-of-other-summaries">Barplots of other summaries</a></li>
  <li><a href="#reorderingsorting-barplot-axes" id="toc-reorderingsorting-barplot-axes" class="nav-link" data-scroll-target="#reorderingsorting-barplot-axes">Reordering/sorting barplot axes</a></li>
  <li><a href="#coloring-barplots-by-another-variable" id="toc-coloring-barplots-by-another-variable" class="nav-link" data-scroll-target="#coloring-barplots-by-another-variable">Coloring barplots by another variable</a></li>
  <li><a href="#creating-logical-vectors" id="toc-creating-logical-vectors" class="nav-link" data-scroll-target="#creating-logical-vectors">Creating logical vectors</a></li>
  <li><a href="#using-to-negate-logicals" id="toc-using-to-negate-logicals" class="nav-link" data-scroll-target="#using-to-negate-logicals">Using <code>!</code> to negate logicals</a></li>
  <li><a href="#grouped-summaries-with-any-and-all" id="toc-grouped-summaries-with-any-and-all" class="nav-link" data-scroll-target="#grouped-summaries-with-any-and-all">Grouped summaries with <code>any()</code> and <code>all()</code></a></li>
  <li><a href="#converting-logicals" id="toc-converting-logicals" class="nav-link" data-scroll-target="#converting-logicals">Converting logicals</a></li>
  <li><a href="#grouped-logical-summaries-with-sums-and-means" id="toc-grouped-logical-summaries-with-sums-and-means" class="nav-link" data-scroll-target="#grouped-logical-summaries-with-sums-and-means">Grouped logical summaries with sums and means</a></li>
  </ul></li>
  <li><a href="#causality-week-4" id="toc-causality-week-4" class="nav-link" data-scroll-target="#causality-week-4">Causality (Week 4)</a>
  <ul class="collapse">
  <li><a href="#calculating-a-difference-in-means-by-filtering" id="toc-calculating-a-difference-in-means-by-filtering" class="nav-link" data-scroll-target="#calculating-a-difference-in-means-by-filtering">Calculating a difference in means by filtering</a></li>
  <li><a href="#pivoting-a-tibble-to-make-a-cross-tab" id="toc-pivoting-a-tibble-to-make-a-cross-tab" class="nav-link" data-scroll-target="#pivoting-a-tibble-to-make-a-cross-tab">Pivoting a tibble to make a cross-tab</a></li>
  <li><a href="#calculating-difference-in-means-by-pivoting" id="toc-calculating-difference-in-means-by-pivoting" class="nav-link" data-scroll-target="#calculating-difference-in-means-by-pivoting">Calculating difference in means by pivoting</a></li>
  <li><a href="#creating-new-labels-for-variables-to-make-nicer-tables" id="toc-creating-new-labels-for-variables-to-make-nicer-tables" class="nav-link" data-scroll-target="#creating-new-labels-for-variables-to-make-nicer-tables">Creating new labels for variables to make nicer tables</a></li>
  <li><a href="#calculating-difference-in-means-by-two-level-grouping-variable" id="toc-calculating-difference-in-means-by-two-level-grouping-variable" class="nav-link" data-scroll-target="#calculating-difference-in-means-by-two-level-grouping-variable">Calculating difference in means by two-level grouping variable</a></li>
  <li><a href="#creating-grouping-variables-with-more-than-2-levels" id="toc-creating-grouping-variables-with-more-than-2-levels" class="nav-link" data-scroll-target="#creating-grouping-variables-with-more-than-2-levels">Creating grouping variables with more than 2 levels</a></li>
  <li><a href="#calculating-difference-in-mean-by-grouping-variable-with-more-than-2-levels" id="toc-calculating-difference-in-mean-by-grouping-variable-with-more-than-2-levels" class="nav-link" data-scroll-target="#calculating-difference-in-mean-by-grouping-variable-with-more-than-2-levels">Calculating difference in mean by grouping variable with more than 2 levels</a></li>
  <li><a href="#calculating-before-and-after-difference-in-means" id="toc-calculating-before-and-after-difference-in-means" class="nav-link" data-scroll-target="#calculating-before-and-after-difference-in-means">Calculating before and after difference in means</a></li>
  <li><a href="#calculating-difference-in-differences-estimator" id="toc-calculating-difference-in-differences-estimator" class="nav-link" data-scroll-target="#calculating-difference-in-differences-estimator">Calculating difference-in-differences estimator</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Gov 50 Cheat Sheet</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gov50data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="r-basics-week-1" class="level2">
<h2 class="anchored" data-anchor-id="r-basics-week-1">R Basics (Week 1)</h2>
<section id="creating-a-vector" class="level3">
<h3 class="anchored" data-anchor-id="creating-a-vector">Creating a vector</h3>
<p>You can create a vector using the <code>c</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Any R code that begins with the # character is a comment</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Comments are ignored by R</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>my_numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">23</span>, <span class="dv">42</span>) <span class="co"># Anything after # is also a</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># comment</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>my_numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  4  8 15 16 23 42</code></pre>
</div>
</div>
</section>
<section id="installing-and-loading-a-package" class="level3">
<h3 class="anchored" data-anchor-id="installing-and-loading-a-package">Installing and loading a package</h3>
<p>You can install a package with the <code>install.packages</code> function, passing the name of the package to be installed as a string (that is, in quotes):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can load a package into the R environment by calling <code>library()</code> with the name of package without quotes. You should only have one package per library call.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="calling-functions-from-specific-packages" class="level3">
<h3 class="anchored" data-anchor-id="calling-functions-from-specific-packages">Calling functions from specific packages</h3>
<p>We can also use the <code>mypackage::</code> prefix to access package functions without loading:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(mtcars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 26%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">mpg</th>
<th style="text-align: right;">cyl</th>
<th style="text-align: right;">disp</th>
<th style="text-align: right;">hp</th>
<th style="text-align: right;">drat</th>
<th style="text-align: right;">wt</th>
<th style="text-align: right;">qsec</th>
<th style="text-align: right;">vs</th>
<th style="text-align: right;">am</th>
<th style="text-align: right;">gear</th>
<th style="text-align: right;">carb</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Mazda RX4</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.620</td>
<td style="text-align: right;">16.46</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mazda RX4 Wag</td>
<td style="text-align: right;">21.0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">160</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.90</td>
<td style="text-align: right;">2.875</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Datsun 710</td>
<td style="text-align: right;">22.8</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">108</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">3.85</td>
<td style="text-align: right;">2.320</td>
<td style="text-align: right;">18.61</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hornet 4 Drive</td>
<td style="text-align: right;">21.4</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">258</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">3.08</td>
<td style="text-align: right;">3.215</td>
<td style="text-align: right;">19.44</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hornet Sportabout</td>
<td style="text-align: right;">18.7</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">360</td>
<td style="text-align: right;">175</td>
<td style="text-align: right;">3.15</td>
<td style="text-align: right;">3.440</td>
<td style="text-align: right;">17.02</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Valiant</td>
<td style="text-align: right;">18.1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">225</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">2.76</td>
<td style="text-align: right;">3.460</td>
<td style="text-align: right;">20.22</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="data-visualization-week-2" class="level2">
<h2 class="anchored" data-anchor-id="data-visualization-week-2">Data Visualization (Week 2)</h2>
<section id="scatter-plot" class="level3">
<h3 class="anchored" data-anchor-id="scatter-plot">Scatter plot</h3>
<p>You can produce a scatter plot with using the <code>x</code> and <code>y</code> aesthetics along with the <code>geom_point()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> midwest,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> popdensity,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> percbelowpoverty)) <span class="sc">+</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cheatsheet_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="smoothed-curves" class="level3">
<h3 class="anchored" data-anchor-id="smoothed-curves">Smoothed curves</h3>
<p>You can add a smoothed curve that summarizes the relationship between two variables with the <code>geom_smooth()</code> function. By default, it uses a loess smoother to estimated the conditional mean of the y-axis variable as a function of the x-axis variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> midwest,</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> popdensity,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> percbelowpoverty)) <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="cheatsheet_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="adding-a-regression-line" class="level3">
<h3 class="anchored" data-anchor-id="adding-a-regression-line">Adding a regression line</h3>
<p><code>geom_smooth</code> can also add a regression line by setting the argument <code>method = "lm"</code> and we can turn off the shaded regions around the line with <code>se = FALSE</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> midwest,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> popdensity,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> percbelowpoverty)) <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="cheatsheet_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="changing-the-scale-of-the-axes" class="level3">
<h3 class="anchored" data-anchor-id="changing-the-scale-of-the-axes">Changing the scale of the axes</h3>
<p>If we want the scale of the x-axis to be logged to stretch out the data we can use the <code>scale_x_log10()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> midwest,</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> popdensity,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> percbelowpoverty)) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="cheatsheet_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="adding-informative-labels-to-a-plot" class="level3">
<h3 class="anchored" data-anchor-id="adding-informative-labels-to-a-plot">Adding informative labels to a plot</h3>
<p>Use the <code>labs()</code> to add informative labels to the plot:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> midwest,</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> popdensity,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> percbelowpoverty)) <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Population Density"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Percent of County Below Poverty Line"</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Poverty and Population Density"</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Among Counties in the Midwest"</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">source =</span> <span class="st">"US Census, 2000"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="cheatsheet_files/figure-html/labels-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="mapping-aesthetics-to-variables" class="level3">
<h3 class="anchored" data-anchor-id="mapping-aesthetics-to-variables">Mapping aesthetics to variables</h3>
<p>If you would like to map an aesthetic to a variable for all geoms in the plot, you can put it in the <code>aes</code> call in the <code>ggplot()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> midwest,</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> popdensity,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> percbelowpoverty,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> state,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> state)) <span class="sc">+</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="cheatsheet_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="mapping-aesthetics-for-a-single-geom" class="level3">
<h3 class="anchored" data-anchor-id="mapping-aesthetics-for-a-single-geom">Mapping aesthetics for a single geom</h3>
<p>You can also map aesthetics for a specific geom using the <code>mapping</code> argument to that function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> midwest,</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> popdensity,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> percbelowpoverty)) <span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> state)) <span class="sc">+</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="cheatsheet_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="setting-the-aesthetics-for-all-observations" class="level3">
<h3 class="anchored" data-anchor-id="setting-the-aesthetics-for-all-observations">Setting the aesthetics for all observations</h3>
<p>If you would like to set the color or size or shape of a geom for all data points (that is, not mapped to any variables), be sure to set these outside of <code>aes()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> midwest,</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> popdensity,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> percbelowpoverty)) <span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"purple"</span>) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'loess' and formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="cheatsheet_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="histograms" class="level3">
<h3 class="anchored" data-anchor-id="histograms">Histograms</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> midwest,</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> percbelowpoverty)) <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="cheatsheet_files/figure-html/histogram-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="data-wrangling-week-2-3" class="level2">
<h2 class="anchored" data-anchor-id="data-wrangling-week-2-3">Data Wrangling (week 2-3)</h2>
<section id="subsetting-a-data-frame" class="level3">
<h3 class="anchored" data-anchor-id="subsetting-a-data-frame">Subsetting a data frame</h3>
<p>Use the <code>filter()</code> function from the <code>dplyr</code> package to subset a data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gov50data)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(weekday <span class="sc">==</span> <span class="st">"Tue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 509 × 10
   callsign affiliation date       weekday ideology national_politics
   &lt;chr&gt;    &lt;chr&gt;       &lt;date&gt;     &lt;ord&gt;      &lt;dbl&gt;             &lt;dbl&gt;
 1 KAEF     ABC         2017-06-13 Tue      0.0242              0.180
 2 KBVU     FOX         2017-06-13 Tue      0.00894             0.186
 3 KBZK     CBS         2017-06-13 Tue      0.129               0.306
 4 KCVU     FOX         2017-06-13 Tue      0.114               0.124
 5 KECI     NBC         2017-06-13 Tue      0.115               0.283
 6 KHSL     CBS         2017-06-13 Tue      0.0821              0.274
 7 KNVN     NBC         2017-06-13 Tue      0.120               0.261
 8 KPAX     CBS         2017-06-13 Tue      0.0984              0.208
 9 KRCR     ABC         2017-06-13 Tue      0.0187              0.206
10 KTMF     ABC         2017-06-13 Tue      0.233               0.101
# ℹ 499 more rows
# ℹ 4 more variables: local_politics &lt;dbl&gt;, sinclair2017 &lt;dbl&gt;, post &lt;dbl&gt;,
#   month &lt;ord&gt;</code></pre>
</div>
</div>
<p>You can filter based on multiple conditions to subset to the rows that meet all conditions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(weekday <span class="sc">==</span> <span class="st">"Tue"</span>,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>         affiliation <span class="sc">==</span> <span class="st">"FOX"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 70 × 10
   callsign affiliation date       weekday ideology national_politics
   &lt;chr&gt;    &lt;chr&gt;       &lt;date&gt;     &lt;ord&gt;      &lt;dbl&gt;             &lt;dbl&gt;
 1 KBVU     FOX         2017-06-13 Tue      0.00894            0.186 
 2 KCVU     FOX         2017-06-13 Tue      0.114              0.124 
 3 WEMT     FOX         2017-06-13 Tue      0.235              0.149 
 4 WYDO     FOX         2017-06-13 Tue      0.0949             0.182 
 5 WEMT     FOX         2017-06-20 Tue      0.268              0.134 
 6 WYDO     FOX         2017-06-20 Tue      0.0590             0.155 
 7 WEMT     FOX         2017-06-27 Tue      0.0457             0.164 
 8 WYDO     FOX         2017-06-27 Tue     -0.0588             0.147 
 9 WEMT     FOX         2017-07-04 Tue      0.0801             0.0986
10 WYDO     FOX         2017-07-04 Tue      0.0555             0.0910
# ℹ 60 more rows
# ℹ 4 more variables: local_politics &lt;dbl&gt;, sinclair2017 &lt;dbl&gt;, post &lt;dbl&gt;,
#   month &lt;ord&gt;</code></pre>
</div>
</div>
<p>You can use the <code>|</code> operator to match one of two conditions (“OR” rather than “AND”):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(affiliation <span class="sc">==</span> <span class="st">"FOX"</span> <span class="sc">|</span> affiliation <span class="sc">==</span> <span class="st">"ABC"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,033 × 10
   callsign affiliation date       weekday  ideology national_politics
   &lt;chr&gt;    &lt;chr&gt;       &lt;date&gt;     &lt;ord&gt;       &lt;dbl&gt;             &lt;dbl&gt;
 1 KTMF     ABC         2017-06-07 Wed      0.0842              0.152 
 2 KTXS     ABC         2017-06-07 Wed     -0.000488            0.0925
 3 KAEF     ABC         2017-06-08 Thu      0.0426              0.213 
 4 KBVU     FOX         2017-06-08 Thu     -0.0860              0.169 
 5 KTMF     ABC         2017-06-08 Thu      0.0433              0.179 
 6 KTXS     ABC         2017-06-08 Thu      0.0627              0.158 
 7 WCTI     ABC         2017-06-08 Thu      0.139               0.225 
 8 KAEF     ABC         2017-06-09 Fri      0.0870              0.153 
 9 KTXS     ABC         2017-06-09 Fri      0.0879              0.0790
10 WCTI     ABC         2017-06-09 Fri      0.0667              0.182 
# ℹ 1,023 more rows
# ℹ 4 more variables: local_politics &lt;dbl&gt;, sinclair2017 &lt;dbl&gt;, post &lt;dbl&gt;,
#   month &lt;ord&gt;</code></pre>
</div>
</div>
<p>To test if a variable is one of several possible values, you can also use the <code>%in%</code> command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(weekday <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Mon"</span>, <span class="st">"Fri"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,021 × 10
   callsign affiliation date       weekday ideology national_politics
   &lt;chr&gt;    &lt;chr&gt;       &lt;date&gt;     &lt;ord&gt;      &lt;dbl&gt;             &lt;dbl&gt;
 1 KAEF     ABC         2017-06-09 Fri       0.0870            0.153 
 2 KECI     NBC         2017-06-09 Fri       0.115             0.216 
 3 KPAX     CBS         2017-06-09 Fri       0.0882            0.315 
 4 KRBC     NBC         2017-06-09 Fri       0.0929            0.152 
 5 KTAB     CBS         2017-06-09 Fri       0.0588            0.0711
 6 KTXS     ABC         2017-06-09 Fri       0.0879            0.0790
 7 WCTI     ABC         2017-06-09 Fri       0.0667            0.182 
 8 WITN     NBC         2017-06-09 Fri      -0.0683            0.146 
 9 WNCT     CBS         2017-06-09 Fri      -0.0181            0.126 
10 WYDO     FOX         2017-06-09 Fri      -0.0330            0.0802
# ℹ 1,011 more rows
# ℹ 4 more variables: local_politics &lt;dbl&gt;, sinclair2017 &lt;dbl&gt;, post &lt;dbl&gt;,
#   month &lt;ord&gt;</code></pre>
</div>
</div>
<p>If you want to subset to a set of specific row numbers, you can use the <code>slice</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="do">## subset to the first 5 rows</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 10
  callsign affiliation date       weekday ideology national_politics
  &lt;chr&gt;    &lt;chr&gt;       &lt;date&gt;     &lt;ord&gt;      &lt;dbl&gt;             &lt;dbl&gt;
1 KECI     NBC         2017-06-07 Wed       0.0655            0.225 
2 KPAX     CBS         2017-06-07 Wed       0.0853            0.283 
3 KRBC     NBC         2017-06-07 Wed       0.0183            0.130 
4 KTAB     CBS         2017-06-07 Wed       0.0850            0.0901
5 KTMF     ABC         2017-06-07 Wed       0.0842            0.152 
# ℹ 4 more variables: local_politics &lt;dbl&gt;, sinclair2017 &lt;dbl&gt;, post &lt;dbl&gt;,
#   month &lt;ord&gt;</code></pre>
</div>
</div>
<p>Here the <code>1:5</code> syntax tells R to produce a vector that starts at 1 and ends at 5, incrementing by 1:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
</div>
</section>
<section id="filtering-to-the-largestsmallest-values-of-a-variable" class="level3">
<h3 class="anchored" data-anchor-id="filtering-to-the-largestsmallest-values-of-a-variable">Filtering to the largest/smallest values of a variable</h3>
<p>To subset to the rows that have the largest or smallest values of a given variable, use the <code>slice_max</code> and <code>slice_max</code> functions. For the largest values, use <code>slice_max</code> and use the <code>n</code> argument to specify how many rows you want:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(ideology, <span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 10
  callsign affiliation date       weekday ideology national_politics
  &lt;chr&gt;    &lt;chr&gt;       &lt;date&gt;     &lt;ord&gt;      &lt;dbl&gt;             &lt;dbl&gt;
1 KAEF     ABC         2017-06-19 Mon        0.778            0.0823
2 WYDO     FOX         2017-07-19 Wed        0.580            0.126 
3 KRCR     ABC         2017-10-03 Tue        0.566            0.123 
4 KAEF     ABC         2017-10-18 Wed        0.496            0.0892
5 KBVU     FOX         2017-11-16 Thu        0.491            0.159 
# ℹ 4 more variables: local_politics &lt;dbl&gt;, sinclair2017 &lt;dbl&gt;, post &lt;dbl&gt;,
#   month &lt;ord&gt;</code></pre>
</div>
</div>
<p>To get lowest values, use <code>slice_min</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(ideology, <span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 10
  callsign affiliation date       weekday ideology national_politics
  &lt;chr&gt;    &lt;chr&gt;       &lt;date&gt;     &lt;ord&gt;      &lt;dbl&gt;             &lt;dbl&gt;
1 KRBC     NBC         2017-10-19 Thu       -0.674            0.0731
2 WJHL     CBS         2017-12-08 Fri       -0.673            0.0364
3 KRBC     NBC         2017-10-18 Wed       -0.586            0.0470
4 KCVU     FOX         2017-06-22 Thu       -0.414            0.158 
5 KRBC     NBC         2017-12-11 Mon       -0.365            0.0674
# ℹ 4 more variables: local_politics &lt;dbl&gt;, sinclair2017 &lt;dbl&gt;, post &lt;dbl&gt;,
#   month &lt;ord&gt;</code></pre>
</div>
</div>
</section>
<section id="sorting-rows-by-a-variable" class="level3">
<h3 class="anchored" data-anchor-id="sorting-rows-by-a-variable">Sorting rows by a variable</h3>
<p>You can sort the rows of a data set using the <code>arrange()</code> function. By default, this will sort the rows from smallest to largest.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(ideology)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,560 × 10
   callsign affiliation date       weekday ideology national_politics
   &lt;chr&gt;    &lt;chr&gt;       &lt;date&gt;     &lt;ord&gt;      &lt;dbl&gt;             &lt;dbl&gt;
 1 KRBC     NBC         2017-10-19 Thu       -0.674            0.0731
 2 WJHL     CBS         2017-12-08 Fri       -0.673            0.0364
 3 KRBC     NBC         2017-10-18 Wed       -0.586            0.0470
 4 KCVU     FOX         2017-06-22 Thu       -0.414            0.158 
 5 KRBC     NBC         2017-12-11 Mon       -0.365            0.0674
 6 KAEF     ABC         2017-06-21 Wed       -0.315            0.130 
 7 KTMF     ABC         2017-12-01 Fri       -0.303            0.179 
 8 KWYB     ABC         2017-12-01 Fri       -0.303            0.160 
 9 KTVM     NBC         2017-09-01 Fri       -0.302            0.0507
10 KNVN     NBC         2017-12-08 Fri       -0.299            0.121 
# ℹ 2,550 more rows
# ℹ 4 more variables: local_politics &lt;dbl&gt;, sinclair2017 &lt;dbl&gt;, post &lt;dbl&gt;,
#   month &lt;ord&gt;</code></pre>
</div>
</div>
<p>If you would like to sort the rows from largest to smallest (descending order), you can wrap the variable name with <code>desc()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(ideology))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,560 × 10
   callsign affiliation date       weekday ideology national_politics
   &lt;chr&gt;    &lt;chr&gt;       &lt;date&gt;     &lt;ord&gt;      &lt;dbl&gt;             &lt;dbl&gt;
 1 KAEF     ABC         2017-06-19 Mon        0.778            0.0823
 2 WYDO     FOX         2017-07-19 Wed        0.580            0.126 
 3 KRCR     ABC         2017-10-03 Tue        0.566            0.123 
 4 KAEF     ABC         2017-10-18 Wed        0.496            0.0892
 5 KBVU     FOX         2017-11-16 Thu        0.491            0.159 
 6 KTMF     ABC         2017-11-06 Mon        0.455            0.138 
 7 KAEF     ABC         2017-06-29 Thu        0.447            0.126 
 8 KPAX     CBS         2017-11-23 Thu        0.437            0.125 
 9 KTAB     CBS         2017-11-16 Thu        0.427            0.0631
10 KCVU     FOX         2017-07-06 Thu        0.406            0.154 
# ℹ 2,550 more rows
# ℹ 4 more variables: local_politics &lt;dbl&gt;, sinclair2017 &lt;dbl&gt;, post &lt;dbl&gt;,
#   month &lt;ord&gt;</code></pre>
</div>
</div>
</section>
<section id="selectingsubsetting-the-columns" class="level3">
<h3 class="anchored" data-anchor-id="selectingsubsetting-the-columns">Selecting/subsetting the columns</h3>
<p>You can subset the data to only certain columns using the <code>select()</code> command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(callsign, date, ideology)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,560 × 3
   callsign date        ideology
   &lt;chr&gt;    &lt;date&gt;         &lt;dbl&gt;
 1 KECI     2017-06-07  0.0655  
 2 KPAX     2017-06-07  0.0853  
 3 KRBC     2017-06-07  0.0183  
 4 KTAB     2017-06-07  0.0850  
 5 KTMF     2017-06-07  0.0842  
 6 KTXS     2017-06-07 -0.000488
 7 KAEF     2017-06-08  0.0426  
 8 KBVU     2017-06-08 -0.0860  
 9 KECI     2017-06-08  0.0902  
10 KPAX     2017-06-08  0.0668  
# ℹ 2,550 more rows</code></pre>
</div>
</div>
<p>If you want to select a range of columns from, say, <code>callsign</code> to <code>ideology</code>, you can use the <code>:</code> operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(callsign<span class="sc">:</span>ideology)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,560 × 5
   callsign affiliation date       weekday  ideology
   &lt;chr&gt;    &lt;chr&gt;       &lt;date&gt;     &lt;ord&gt;       &lt;dbl&gt;
 1 KECI     NBC         2017-06-07 Wed      0.0655  
 2 KPAX     CBS         2017-06-07 Wed      0.0853  
 3 KRBC     NBC         2017-06-07 Wed      0.0183  
 4 KTAB     CBS         2017-06-07 Wed      0.0850  
 5 KTMF     ABC         2017-06-07 Wed      0.0842  
 6 KTXS     ABC         2017-06-07 Wed     -0.000488
 7 KAEF     ABC         2017-06-08 Thu      0.0426  
 8 KBVU     FOX         2017-06-08 Thu     -0.0860  
 9 KECI     NBC         2017-06-08 Thu      0.0902  
10 KPAX     CBS         2017-06-08 Thu      0.0668  
# ℹ 2,550 more rows</code></pre>
</div>
</div>
<p>You can remove a variable from the data set by using the minus sign <code>-</code> in front of it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>callsign)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,560 × 9
   affiliation date       weekday  ideology national_politics local_politics
   &lt;chr&gt;       &lt;date&gt;     &lt;ord&gt;       &lt;dbl&gt;             &lt;dbl&gt;          &lt;dbl&gt;
 1 NBC         2017-06-07 Wed      0.0655              0.225          0.148 
 2 CBS         2017-06-07 Wed      0.0853              0.283          0.123 
 3 NBC         2017-06-07 Wed      0.0183              0.130          0.189 
 4 CBS         2017-06-07 Wed      0.0850              0.0901         0.138 
 5 ABC         2017-06-07 Wed      0.0842              0.152          0.129 
 6 ABC         2017-06-07 Wed     -0.000488            0.0925         0.0791
 7 ABC         2017-06-08 Thu      0.0426              0.213          0.228 
 8 FOX         2017-06-08 Thu     -0.0860              0.169          0.247 
 9 NBC         2017-06-08 Thu      0.0902              0.276          0.152 
10 CBS         2017-06-08 Thu      0.0668              0.305          0.124 
# ℹ 2,550 more rows
# ℹ 3 more variables: sinclair2017 &lt;dbl&gt;, post &lt;dbl&gt;, month &lt;ord&gt;</code></pre>
</div>
</div>
<p>You can also drop several variables using the <code>c()</code> function or the <code>(a:b)</code> syntax:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(callsign, date, ideology))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,560 × 7
   affiliation weekday national_politics local_politics sinclair2017  post month
   &lt;chr&gt;       &lt;ord&gt;               &lt;dbl&gt;          &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;ord&gt;
 1 NBC         Wed                0.225          0.148             1     0 Jun  
 2 CBS         Wed                0.283          0.123             0     0 Jun  
 3 NBC         Wed                0.130          0.189             0     0 Jun  
 4 CBS         Wed                0.0901         0.138             0     0 Jun  
 5 ABC         Wed                0.152          0.129             0     0 Jun  
 6 ABC         Wed                0.0925         0.0791            1     0 Jun  
 7 ABC         Thu                0.213          0.228             1     0 Jun  
 8 FOX         Thu                0.169          0.247             1     0 Jun  
 9 NBC         Thu                0.276          0.152             1     0 Jun  
10 CBS         Thu                0.305          0.124             0     0 Jun  
# ℹ 2,550 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>(callsign<span class="sc">:</span>ideology))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,560 × 5
   national_politics local_politics sinclair2017  post month
               &lt;dbl&gt;          &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;ord&gt;
 1            0.225          0.148             1     0 Jun  
 2            0.283          0.123             0     0 Jun  
 3            0.130          0.189             0     0 Jun  
 4            0.0901         0.138             0     0 Jun  
 5            0.152          0.129             0     0 Jun  
 6            0.0925         0.0791            1     0 Jun  
 7            0.213          0.228             1     0 Jun  
 8            0.169          0.247             1     0 Jun  
 9            0.276          0.152             1     0 Jun  
10            0.305          0.124             0     0 Jun  
# ℹ 2,550 more rows</code></pre>
</div>
</div>
<p>You can also select columns based on matching patterns in the names with functions like <code>starts_with()</code> or <code>ends_with()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"politics"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,560 × 2
   national_politics local_politics
               &lt;dbl&gt;          &lt;dbl&gt;
 1            0.225          0.148 
 2            0.283          0.123 
 3            0.130          0.189 
 4            0.0901         0.138 
 5            0.152          0.129 
 6            0.0925         0.0791
 7            0.213          0.228 
 8            0.169          0.247 
 9            0.276          0.152 
10            0.305          0.124 
# ℹ 2,550 more rows</code></pre>
</div>
</div>
<p>This code finds all variables with column names that end with the string “politics”. See the <a href="https://dplyr.tidyverse.org/reference/select.html">help page for <code>select()</code></a> for more information on different ways to select.</p>
</section>
<section id="renaming-a-variable" class="level3">
<h3 class="anchored" data-anchor-id="renaming-a-variable">Renaming a variable</h3>
<p>You can rename a variable useing the function <code>rename(new_name = old_name)</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">call_sign =</span> callsign)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,560 × 10
   call_sign affiliation date       weekday  ideology national_politics
   &lt;chr&gt;     &lt;chr&gt;       &lt;date&gt;     &lt;ord&gt;       &lt;dbl&gt;             &lt;dbl&gt;
 1 KECI      NBC         2017-06-07 Wed      0.0655              0.225 
 2 KPAX      CBS         2017-06-07 Wed      0.0853              0.283 
 3 KRBC      NBC         2017-06-07 Wed      0.0183              0.130 
 4 KTAB      CBS         2017-06-07 Wed      0.0850              0.0901
 5 KTMF      ABC         2017-06-07 Wed      0.0842              0.152 
 6 KTXS      ABC         2017-06-07 Wed     -0.000488            0.0925
 7 KAEF      ABC         2017-06-08 Thu      0.0426              0.213 
 8 KBVU      FOX         2017-06-08 Thu     -0.0860              0.169 
 9 KECI      NBC         2017-06-08 Thu      0.0902              0.276 
10 KPAX      CBS         2017-06-08 Thu      0.0668              0.305 
# ℹ 2,550 more rows
# ℹ 4 more variables: local_politics &lt;dbl&gt;, sinclair2017 &lt;dbl&gt;, post &lt;dbl&gt;,
#   month &lt;ord&gt;</code></pre>
</div>
</div>
</section>
<section id="creating-new-variables" class="level3">
<h3 class="anchored" data-anchor-id="creating-new-variables">Creating new variables</h3>
<p>You can create new variables that are functions of old variables using the <code>mutate()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">national_local_diff =</span> national_politics <span class="sc">-</span> local_politics) <span class="sc">|&gt;</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(callsign, date, national_politics, local_politics,</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>         national_local_diff)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,560 × 5
   callsign date       national_politics local_politics national_local_diff
   &lt;chr&gt;    &lt;date&gt;                 &lt;dbl&gt;          &lt;dbl&gt;               &lt;dbl&gt;
 1 KECI     2017-06-07            0.225          0.148               0.0761
 2 KPAX     2017-06-07            0.283          0.123               0.160 
 3 KRBC     2017-06-07            0.130          0.189              -0.0589
 4 KTAB     2017-06-07            0.0901         0.138              -0.0476
 5 KTMF     2017-06-07            0.152          0.129               0.0229
 6 KTXS     2017-06-07            0.0925         0.0791              0.0134
 7 KAEF     2017-06-08            0.213          0.228              -0.0151
 8 KBVU     2017-06-08            0.169          0.247              -0.0781
 9 KECI     2017-06-08            0.276          0.152               0.124 
10 KPAX     2017-06-08            0.305          0.124               0.180 
# ℹ 2,550 more rows</code></pre>
</div>
</div>
</section>
<section id="creating-new-variables-based-on-yesno-conditions" class="level3">
<h3 class="anchored" data-anchor-id="creating-new-variables-based-on-yesno-conditions">Creating new variables based on yes/no conditions</h3>
<p>If you want to create a new variable that can take on two values based on a logical conditional, you should use the <code>if_else()</code> function inside of <code>mutate()</code>. For instance, if we want to create a more nicely labeled version of the <code>sinclair2017</code> variable (which is 0/1), we could do:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Ownership =</span> <span class="fu">if_else</span>(sinclair2017 <span class="sc">==</span> <span class="dv">1</span>,</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Acquired by Sinclair"</span>,</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"Not Acquired"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(callsign, affiliation, date, sinclair2017, Ownership)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,560 × 5
   callsign affiliation date       sinclair2017 Ownership           
   &lt;chr&gt;    &lt;chr&gt;       &lt;date&gt;            &lt;dbl&gt; &lt;chr&gt;               
 1 KECI     NBC         2017-06-07            1 Acquired by Sinclair
 2 KPAX     CBS         2017-06-07            0 Not Acquired        
 3 KRBC     NBC         2017-06-07            0 Not Acquired        
 4 KTAB     CBS         2017-06-07            0 Not Acquired        
 5 KTMF     ABC         2017-06-07            0 Not Acquired        
 6 KTXS     ABC         2017-06-07            1 Acquired by Sinclair
 7 KAEF     ABC         2017-06-08            1 Acquired by Sinclair
 8 KBVU     FOX         2017-06-08            1 Acquired by Sinclair
 9 KECI     NBC         2017-06-08            1 Acquired by Sinclair
10 KPAX     CBS         2017-06-08            0 Not Acquired        
# ℹ 2,550 more rows</code></pre>
</div>
</div>
</section>
<section id="summarizing-a-variable" class="level3">
<h3 class="anchored" data-anchor-id="summarizing-a-variable">Summarizing a variable</h3>
<p>You can calculate summaries of variables in the data set using the <code>summarize()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_ideology =</span> <span class="fu">mean</span>(ideology),</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_ideology =</span> <span class="fu">sd</span>(ideology),</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_ideology =</span> <span class="fu">median</span>(ideology)</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  avg_ideology sd_ideology median_ideology
         &lt;dbl&gt;       &lt;dbl&gt;           &lt;dbl&gt;
1       0.0907      0.0962          0.0929</code></pre>
</div>
</div>
</section>
<section id="summarizing-variables-by-groups-of-rows" class="level3">
<h3 class="anchored" data-anchor-id="summarizing-variables-by-groups-of-rows">Summarizing variables by groups of rows</h3>
<p>By default, <code>summarize()</code> calculates the summaries of variables for all rows in the data frame. You can also calculate these summaries within groups of rows defined by another variable in the data frame using the <code>group_by()</code> function before summarizing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(month) <span class="sc">|&gt;</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_ideology =</span> <span class="fu">mean</span>(ideology),</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_ideology =</span> <span class="fu">sd</span>(ideology),</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_ideology =</span> <span class="fu">median</span>(ideology)</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
  month avg_ideology sd_ideology median_ideology
  &lt;ord&gt;        &lt;dbl&gt;       &lt;dbl&gt;           &lt;dbl&gt;
1 Jun         0.0786      0.0979          0.0838
2 Jul         0.103       0.0888          0.0992
3 Aug         0.105       0.0811          0.106 
4 Sep         0.0751      0.0902          0.0768
5 Oct         0.0862      0.110           0.0853
6 Nov         0.0972      0.0893          0.102 
7 Dec         0.0774      0.125           0.0878</code></pre>
</div>
</div>
<p>Here, the <code>summarize()</code> function breaks apart the original data into smaller data frames for each month and applies the summary functions to those, then combines everything into one tibble.</p>
</section>
<section id="summarizing-by-multiple-variables" class="level3">
<h3 class="anchored" data-anchor-id="summarizing-by-multiple-variables">Summarizing by multiple variables</h3>
<p>You can group by multiple variables and <code>summarize()</code> will create groups based on every combination of each variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sinclair2017, post) <span class="sc">|&gt;</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_ideology =</span> <span class="fu">mean</span>(ideology)</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'sinclair2017'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
# Groups:   sinclair2017 [2]
  sinclair2017  post avg_ideology
         &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt;
1            0     0       0.100 
2            0     1       0.0768
3            1     0       0.0936
4            1     1       0.0938</code></pre>
</div>
</div>
<p>You’ll notice the message that <code>summarize()</code> sends after using to let us know that resulting tibble is grouped by <code>sinclair2017</code>. By default, <code>summarize()</code> drops the last group you provided in <code>group_by</code> (<code>post</code> in this case). This isn’t an error message, it’s just letting us know some helpful information. If you want to avoid this messaging displaying, you need to specify what grouping you want after using the <code>.groups</code> argument:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sinclair2017, post) <span class="sc">|&gt;</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_ideology =</span> <span class="fu">mean</span>(ideology),</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop_last"</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
# Groups:   sinclair2017 [2]
  sinclair2017  post avg_ideology
         &lt;dbl&gt; &lt;dbl&gt;        &lt;dbl&gt;
1            0     0       0.100 
2            0     1       0.0768
3            1     0       0.0936
4            1     1       0.0938</code></pre>
</div>
</div>
</section>
<section id="summarizing-across-many-variables" class="level3">
<h3 class="anchored" data-anchor-id="summarizing-across-many-variables">Summarizing across many variables</h3>
<p>If you want to apply the same summary to multiple variables, you can use the <code>across(vars, fun)</code> function, where <code>vars</code> is a vector of variable names (specified like with <code>select()</code>) and <code>fun</code> is a summary function to apply to those variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sinclair2017, post) <span class="sc">|&gt;</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(ideology, national_politics), mean)</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'sinclair2017'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
# Groups:   sinclair2017 [2]
  sinclair2017  post ideology national_politics
         &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;             &lt;dbl&gt;
1            0     0   0.100              0.134
2            0     1   0.0768             0.126
3            1     0   0.0936             0.137
4            1     1   0.0938             0.155</code></pre>
</div>
</div>
<p>As with <code>select()</code>, you can use the <code>:</code> operator to select a range of variables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sinclair2017, post) <span class="sc">|&gt;</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(ideology<span class="sc">:</span>local_politics, mean)</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'sinclair2017'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
# Groups:   sinclair2017 [2]
  sinclair2017  post ideology national_politics local_politics
         &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;             &lt;dbl&gt;          &lt;dbl&gt;
1            0     0   0.100              0.134          0.168
2            0     1   0.0768             0.126          0.167
3            1     0   0.0936             0.137          0.157
4            1     1   0.0938             0.155          0.139</code></pre>
</div>
</div>
</section>
<section id="table-of-counts-of-a-categorical-variable" class="level3">
<h3 class="anchored" data-anchor-id="table-of-counts-of-a-categorical-variable">Table of counts of a categorical variable</h3>
<p>There are two way to produce a table of counts of each category of a variable. The first is to use <code>group_by</code> and <code>summarize</code> along with the summary function <code>n()</code>, which returns the numbers of rows in each grouping (that is, each combination of the grouping variables):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(affiliation) <span class="sc">|&gt;</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  affiliation     n
  &lt;chr&gt;       &lt;int&gt;
1 ABC           687
2 CBS           758
3 FOX           346
4 NBC           769</code></pre>
</div>
</div>
<p>A simpler way to acheive the same outcome is to use the <code>count()</code> function, which implements these two steps:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(affiliation)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  affiliation     n
  &lt;chr&gt;       &lt;int&gt;
1 ABC           687
2 CBS           758
3 FOX           346
4 NBC           769</code></pre>
</div>
</div>
</section>
<section id="producing-nicely-formatted-tables-with-kable" class="level3">
<h3 class="anchored" data-anchor-id="producing-nicely-formatted-tables-with-kable">Producing nicely formatted tables with <code>kable()</code></h3>
<p>You can take any tibble in R and convert it into a more readable output by passing it to <code>knitr::kable()</code>. In our homework, generally, we will save the tibble as an object and then pass it to this function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>month_summary <span class="ot">&lt;-</span> news <span class="sc">|&gt;</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(month) <span class="sc">|&gt;</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_ideology =</span> <span class="fu">mean</span>(ideology),</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_ideology =</span> <span class="fu">sd</span>(ideology)</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(month_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">month</th>
<th style="text-align: right;">avg_ideology</th>
<th style="text-align: right;">sd_ideology</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Jun</td>
<td style="text-align: right;">0.0785518</td>
<td style="text-align: right;">0.0979339</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jul</td>
<td style="text-align: right;">0.1032917</td>
<td style="text-align: right;">0.0888328</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aug</td>
<td style="text-align: right;">0.1049908</td>
<td style="text-align: right;">0.0811141</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sep</td>
<td style="text-align: right;">0.0751067</td>
<td style="text-align: right;">0.0902003</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Oct</td>
<td style="text-align: right;">0.0861639</td>
<td style="text-align: right;">0.1098108</td>
</tr>
<tr class="even">
<td style="text-align: left;">Nov</td>
<td style="text-align: right;">0.0971796</td>
<td style="text-align: right;">0.0892845</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dec</td>
<td style="text-align: right;">0.0773873</td>
<td style="text-align: right;">0.1246451</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>You can add informative column names to the table using the <code>col.names</code> argument.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  month_summary,</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Month"</span>, <span class="st">"Average Ideology"</span>, <span class="st">"SD of Ideology"</span>)</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Month</th>
<th style="text-align: right;">Average Ideology</th>
<th style="text-align: right;">SD of Ideology</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Jun</td>
<td style="text-align: right;">0.0785518</td>
<td style="text-align: right;">0.0979339</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jul</td>
<td style="text-align: right;">0.1032917</td>
<td style="text-align: right;">0.0888328</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aug</td>
<td style="text-align: right;">0.1049908</td>
<td style="text-align: right;">0.0811141</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sep</td>
<td style="text-align: right;">0.0751067</td>
<td style="text-align: right;">0.0902003</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Oct</td>
<td style="text-align: right;">0.0861639</td>
<td style="text-align: right;">0.1098108</td>
</tr>
<tr class="even">
<td style="text-align: left;">Nov</td>
<td style="text-align: right;">0.0971796</td>
<td style="text-align: right;">0.0892845</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dec</td>
<td style="text-align: right;">0.0773873</td>
<td style="text-align: right;">0.1246451</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Finally, we can round the numbers in the table to be a bit nicer using the <code>digits</code> argument. This will tell <code>kable()</code> how many significant digiits to show.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  month_summary,</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Month"</span>, <span class="st">"Average Ideology"</span>, <span class="st">"SD of Ideology"</span>),</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">digits =</span> <span class="dv">3</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Month</th>
<th style="text-align: right;">Average Ideology</th>
<th style="text-align: right;">SD of Ideology</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Jun</td>
<td style="text-align: right;">0.079</td>
<td style="text-align: right;">0.098</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jul</td>
<td style="text-align: right;">0.103</td>
<td style="text-align: right;">0.089</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aug</td>
<td style="text-align: right;">0.105</td>
<td style="text-align: right;">0.081</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sep</td>
<td style="text-align: right;">0.075</td>
<td style="text-align: right;">0.090</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Oct</td>
<td style="text-align: right;">0.086</td>
<td style="text-align: right;">0.110</td>
</tr>
<tr class="even">
<td style="text-align: left;">Nov</td>
<td style="text-align: right;">0.097</td>
<td style="text-align: right;">0.089</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Dec</td>
<td style="text-align: right;">0.077</td>
<td style="text-align: right;">0.125</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="barplots-of-counts" class="level3">
<h3 class="anchored" data-anchor-id="barplots-of-counts">Barplots of counts</h3>
<p>You can visualize counts of a variable using a barplot:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> affiliation)) <span class="sc">+</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cheatsheet_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="barplots-of-other-summaries" class="level3">
<h3 class="anchored" data-anchor-id="barplots-of-other-summaries">Barplots of other summaries</h3>
<p>We can use barplots to visualize other grouped summaries like means, but we need to use the <code>geom_col()</code> geom instead and specify the variable you want to be the height of the bars .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(affiliation) <span class="sc">|&gt;</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_ideology =</span> <span class="fu">mean</span>(ideology)</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> affiliation, <span class="at">y =</span> avg_ideology)) <span class="sc">+</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cheatsheet_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="reorderingsorting-barplot-axes" class="level3">
<h3 class="anchored" data-anchor-id="reorderingsorting-barplot-axes">Reordering/sorting barplot axes</h3>
<p>Often we want to sort the barplot axes to be in the order of the variable of interest so we can quickly compare them. We can use the <code>fct_reorder(group_var, ordering_var)</code> function to do this where the <code>group_var</code> is the grouping variable that is going on the axes and the <code>ordering_var</code> is the variable that we will sort the groups on.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(affiliation) <span class="sc">|&gt;</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_ideology =</span> <span class="fu">mean</span>(ideology)</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(affiliation, avg_ideology),</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> avg_ideology)) <span class="sc">+</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="cheatsheet_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="coloring-barplots-by-another-variable" class="level3">
<h3 class="anchored" data-anchor-id="coloring-barplots-by-another-variable">Coloring barplots by another variable</h3>
<p>You can color the barplots by a another variable using the <code>fill</code> aesthetic:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(callsign, affiliation) <span class="sc">|&gt;</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">avg_ideology =</span> <span class="fu">mean</span>(ideology)</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(avg_ideology, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">fct_reorder</span>(callsign, avg_ideology),</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">x =</span> avg_ideology)) <span class="sc">+</span></span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> affiliation))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'callsign'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="cheatsheet_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="creating-logical-vectors" class="level3">
<h3 class="anchored" data-anchor-id="creating-logical-vectors">Creating logical vectors</h3>
<p>You can create logical variables in your tibbles using mutate:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">right_leaning =</span> ideology <span class="sc">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fall =</span> month <span class="sc">==</span> <span class="st">"Sep"</span> <span class="sc">|</span> month <span class="sc">==</span> <span class="st">"Oct"</span> <span class="sc">|</span> month <span class="sc">==</span> <span class="st">"Nov"</span>,</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">.keep =</span> <span class="st">"used"</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,560 × 4
    ideology month right_leaning fall 
       &lt;dbl&gt; &lt;ord&gt; &lt;lgl&gt;         &lt;lgl&gt;
 1  0.0655   Jun   TRUE          FALSE
 2  0.0853   Jun   TRUE          FALSE
 3  0.0183   Jun   TRUE          FALSE
 4  0.0850   Jun   TRUE          FALSE
 5  0.0842   Jun   TRUE          FALSE
 6 -0.000488 Jun   FALSE         FALSE
 7  0.0426   Jun   TRUE          FALSE
 8 -0.0860   Jun   FALSE         FALSE
 9  0.0902   Jun   TRUE          FALSE
10  0.0668   Jun   TRUE          FALSE
# ℹ 2,550 more rows</code></pre>
</div>
</div>
<p>The <code>.keep = "used"</code> argument here tells mutate to only return the variables created and any variables used to create them. We’re using it here for display purposes.</p>
<p>You can filter based on these logical variables. In particular, if we want to subset to rows where both <code>right_leaning</code> and <code>fall</code> were <code>TRUE</code> we could do the following filter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">right_leaning =</span> ideology <span class="sc">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fall =</span> month <span class="sc">==</span> <span class="st">"Sep"</span> <span class="sc">|</span> month <span class="sc">==</span> <span class="st">"Oct"</span> <span class="sc">|</span> month <span class="sc">==</span> <span class="st">"Nov"</span>,</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">.keep =</span> <span class="st">"used"</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(right_leaning <span class="sc">&amp;</span> fall)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,050 × 4
   ideology month right_leaning fall 
      &lt;dbl&gt; &lt;ord&gt; &lt;lgl&gt;         &lt;lgl&gt;
 1   0.121  Sep   TRUE          TRUE 
 2   0.0564 Sep   TRUE          TRUE 
 3   0.0564 Sep   TRUE          TRUE 
 4   0.324  Sep   TRUE          TRUE 
 5   0.0649 Sep   TRUE          TRUE 
 6   0.0613 Sep   TRUE          TRUE 
 7   0.187  Sep   TRUE          TRUE 
 8   0.0297 Sep   TRUE          TRUE 
 9   0.151  Sep   TRUE          TRUE 
10   0.186  Sep   TRUE          TRUE 
# ℹ 1,040 more rows</code></pre>
</div>
</div>
</section>
<section id="using-to-negate-logicals" class="level3">
<h3 class="anchored" data-anchor-id="using-to-negate-logicals">Using <code>!</code> to negate logicals</h3>
<p>Any time you place the exclamation point in front of a logical, it will turn any <code>TRUE</code> into a <code>FALSE</code> and vice versa. For instance, if we wanted left leaning days in the fall, we could used</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">right_leaning =</span> ideology <span class="sc">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fall =</span> month <span class="sc">==</span> <span class="st">"Sep"</span> <span class="sc">|</span> month <span class="sc">==</span> <span class="st">"Oct"</span> <span class="sc">|</span> month <span class="sc">==</span> <span class="st">"Nov"</span>,</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">.keep =</span> <span class="st">"used"</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>right_leaning <span class="sc">&amp;</span> fall)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 167 × 4
   ideology month right_leaning fall 
      &lt;dbl&gt; &lt;ord&gt; &lt;lgl&gt;         &lt;lgl&gt;
 1 -0.0387  Sep   FALSE         TRUE 
 2 -0.302   Sep   FALSE         TRUE 
 3 -0.00694 Sep   FALSE         TRUE 
 4 -0.0140  Sep   FALSE         TRUE 
 5 -0.0294  Sep   FALSE         TRUE 
 6 -0.0113  Sep   FALSE         TRUE 
 7 -0.105   Sep   FALSE         TRUE 
 8 -0.0286  Sep   FALSE         TRUE 
 9 -0.0462  Sep   FALSE         TRUE 
10 -0.0313  Sep   FALSE         TRUE 
# ℹ 157 more rows</code></pre>
</div>
</div>
<p>Or if we wanted to subset to any combination <strong>except</strong> right leaning and fall, we could negate the AND statement using parentheses:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">right_leaning =</span> ideology <span class="sc">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fall =</span> month <span class="sc">==</span> <span class="st">"Sep"</span> <span class="sc">|</span> month <span class="sc">==</span> <span class="st">"Oct"</span> <span class="sc">|</span> month <span class="sc">==</span> <span class="st">"Nov"</span>,</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">.keep =</span> <span class="st">"used"</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(right_leaning <span class="sc">&amp;</span> fall))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,510 × 4
    ideology month right_leaning fall 
       &lt;dbl&gt; &lt;ord&gt; &lt;lgl&gt;         &lt;lgl&gt;
 1  0.0655   Jun   TRUE          FALSE
 2  0.0853   Jun   TRUE          FALSE
 3  0.0183   Jun   TRUE          FALSE
 4  0.0850   Jun   TRUE          FALSE
 5  0.0842   Jun   TRUE          FALSE
 6 -0.000488 Jun   FALSE         FALSE
 7  0.0426   Jun   TRUE          FALSE
 8 -0.0860   Jun   FALSE         FALSE
 9  0.0902   Jun   TRUE          FALSE
10  0.0668   Jun   TRUE          FALSE
# ℹ 1,500 more rows</code></pre>
</div>
</div>
<p>This is often used in combination with <code>%in%</code> to acheive a “not in” logical:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(affiliation <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"FOX"</span>, <span class="st">"ABC"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,527 × 10
   callsign affiliation date       weekday ideology national_politics
   &lt;chr&gt;    &lt;chr&gt;       &lt;date&gt;     &lt;ord&gt;      &lt;dbl&gt;             &lt;dbl&gt;
 1 KECI     NBC         2017-06-07 Wed       0.0655            0.225 
 2 KPAX     CBS         2017-06-07 Wed       0.0853            0.283 
 3 KRBC     NBC         2017-06-07 Wed       0.0183            0.130 
 4 KTAB     CBS         2017-06-07 Wed       0.0850            0.0901
 5 KECI     NBC         2017-06-08 Thu       0.0902            0.276 
 6 KPAX     CBS         2017-06-08 Thu       0.0668            0.305 
 7 KRBC     NBC         2017-06-08 Thu       0.108             0.156 
 8 KTAB     CBS         2017-06-08 Thu      -0.0178            0.0726
 9 KECI     NBC         2017-06-09 Fri       0.115             0.216 
10 KPAX     CBS         2017-06-09 Fri       0.0882            0.315 
# ℹ 1,517 more rows
# ℹ 4 more variables: local_politics &lt;dbl&gt;, sinclair2017 &lt;dbl&gt;, post &lt;dbl&gt;,
#   month &lt;ord&gt;</code></pre>
</div>
</div>
</section>
<section id="grouped-summaries-with-any-and-all" class="level3">
<h3 class="anchored" data-anchor-id="grouped-summaries-with-any-and-all">Grouped summaries with <code>any()</code> and <code>all()</code></h3>
<p>Once you group a tibble, you can summarize logicals within groups using two commands. <code>any()</code> will return <code>TRUE</code> if a logical is <code>TRUE</code> for any row in a group and <code>FALSE</code> otherwise. <code>all()</code> will return <code>TRUE</code> when the logical inside it is <code>TRUE</code> for all rows in a group and <code>FALSE</code> otherwise.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(callsign) <span class="sc">|&gt;</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">any_liberal =</span> <span class="fu">any</span>(ideology <span class="sc">&lt;</span> <span class="dv">0</span>),</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">all_local =</span> <span class="fu">all</span>(national_politics <span class="sc">&lt;</span> local_politics)</span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22 × 3
   callsign any_liberal all_local
   &lt;chr&gt;    &lt;lgl&gt;       &lt;lgl&gt;    
 1 KAEF     TRUE        FALSE    
 2 KBVU     TRUE        FALSE    
 3 KBZK     TRUE        FALSE    
 4 KCVU     TRUE        FALSE    
 5 KECI     TRUE        FALSE    
 6 KHSL     TRUE        FALSE    
 7 KNVN     TRUE        FALSE    
 8 KPAX     TRUE        FALSE    
 9 KRBC     TRUE        FALSE    
10 KRCR     TRUE        FALSE    
# ℹ 12 more rows</code></pre>
</div>
</div>
</section>
<section id="converting-logicals" class="level3">
<h3 class="anchored" data-anchor-id="converting-logicals">Converting logicals</h3>
<p>When passed to <code>sum()</code> or <code>mean()</code>, <code>TRUE</code> is converted to 1 and <code>FALSE</code> is converted to 0. This means that <code>sum()</code> will return the number of <code>TRUE</code> values in a vector and <code>mean()</code> will return the proportion of <code>TRUE</code> values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5</code></pre>
</div>
</div>
</section>
<section id="grouped-logical-summaries-with-sums-and-means" class="level3">
<h3 class="anchored" data-anchor-id="grouped-logical-summaries-with-sums-and-means">Grouped logical summaries with sums and means</h3>
<p>After grouping, you can summarize using either the <code>sum()</code> or <code>mean()</code> function on a logical. In this case, the <code>sum()</code> will give you the number of time the statement is <code>TRUE</code> within a group, and <code>mean()</code> will give you the proportion of rows that are <code>TRUE</code> within a group.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>news <span class="sc">|&gt;</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(callsign) <span class="sc">|&gt;</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">prop_liberal =</span> <span class="fu">mean</span>(ideology <span class="sc">&lt;</span> <span class="dv">0</span>),</span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_local_bigger =</span> <span class="fu">sum</span>(national_politics <span class="sc">&lt;</span> local_politics)</span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 22 × 3
   callsign prop_liberal num_local_bigger
   &lt;chr&gt;           &lt;dbl&gt;            &lt;int&gt;
 1 KAEF           0.138               111
 2 KBVU           0.143                31
 3 KBZK           0.0526               11
 4 KCVU           0.185                38
 5 KECI           0.137                44
 6 KHSL           0.132               127
 7 KNVN           0.115               130
 8 KPAX           0.0833               74
 9 KRBC           0.196               103
10 KRCR           0.0992               99
# ℹ 12 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="causality-week-4" class="level2">
<h2 class="anchored" data-anchor-id="causality-week-4">Causality (Week 4)</h2>
<p>For this week, we’ll use the data from the transphobia randomized experiment</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>trans</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 565 × 9
     age female voted_gen_14 voted_gen_12 treat_ind racename         democrat
   &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt;
 1    29      0            0            1         0 African American        1
 2    59      1            1            0         1 African American        1
 3    35      1            1            1         1 African American        1
 4    63      1            1            1         1 African American        1
 5    65      0            1            1         1 African American        0
 6    51      1            1            1         0 Caucasian               0
 7    26      1            1            1         0 African American        1
 8    62      1            1            1         1 African American        1
 9    37      0            1            1         0 Caucasian               0
10    51      1            1            1         0 Caucasian               0
# ℹ 555 more rows
# ℹ 2 more variables: nondiscrim_pre &lt;dbl&gt;, nondiscrim_post &lt;dbl&gt;</code></pre>
</div>
</div>
<section id="calculating-a-difference-in-means-by-filtering" class="level3">
<h3 class="anchored" data-anchor-id="calculating-a-difference-in-means-by-filtering">Calculating a difference in means by filtering</h3>
<p>You can calculate a difference in means by creating separate summaries of the treatment and control arms of an experiment or observational study and then taking the differences between them:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>treat_mean <span class="ot">&lt;-</span> trans <span class="sc">|&gt;</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(treat_ind <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">nondiscrim_mean =</span> <span class="fu">mean</span>(nondiscrim_post))</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>treat_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  nondiscrim_mean
            &lt;dbl&gt;
1           0.687</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>control_mean <span class="ot">&lt;-</span> trans <span class="sc">|&gt;</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(treat_ind <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">nondiscrim_mean =</span> <span class="fu">mean</span>(nondiscrim_post))</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>control_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  nondiscrim_mean
            &lt;dbl&gt;
1           0.648</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>diff_in_means <span class="ot">&lt;-</span> treat_mean <span class="sc">-</span> control_mean</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>diff_in_means</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  nondiscrim_mean
1      0.03896674</code></pre>
</div>
</div>
</section>
<section id="pivoting-a-tibble-to-make-a-cross-tab" class="level3">
<h3 class="anchored" data-anchor-id="pivoting-a-tibble-to-make-a-cross-tab">Pivoting a tibble to make a cross-tab</h3>
<p>When grouping by two variables, we sometimes would like the values of one variable to be in the rows and values of the other variable to be in the columns. But <code>group_by()</code> and <code>summarize()</code> by default puts each combination of values for the two variables into rows. We can use the <code>pivot_wider</code> function to move one of the variables (specified with the <code>names_from</code> argument) to the columns. The <code>values_from</code> argument tells R what variable should it use to fil in the data in the resulting table.</p>
<p>So if we wanted to get counts of race (rows) by treatment group (columns), we could start with getting the counts:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>trans <span class="sc">|&gt;</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(treat_ind, racename) <span class="sc">|&gt;</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'treat_ind'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 3
# Groups:   treat_ind [2]
  treat_ind racename             n
      &lt;dbl&gt; &lt;chr&gt;            &lt;int&gt;
1         0 African American    58
2         0 Asian                2
3         0 Caucasian           77
4         0 Hispanic           150
5         1 African American    68
6         1 Asian                4
7         1 Caucasian           75
8         1 Hispanic           130
9         1 Native American      1</code></pre>
</div>
</div>
<p>Then we can pivot the treatment group to the columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>trans <span class="sc">|&gt;</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(treat_ind, racename) <span class="sc">|&gt;</span></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> treat_ind,</span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> n</span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'treat_ind'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  racename           `0`   `1`
  &lt;chr&gt;            &lt;int&gt; &lt;int&gt;
1 African American    58    68
2 Asian                2     4
3 Caucasian           77    75
4 Hispanic           150   130
5 Native American     NA     1</code></pre>
</div>
</div>
</section>
<section id="calculating-difference-in-means-by-pivoting" class="level3">
<h3 class="anchored" data-anchor-id="calculating-difference-in-means-by-pivoting">Calculating difference in means by pivoting</h3>
<p>Now that we know pivoting, we can use this to calculate difference in means instead of the filter approach. We first calculate the means by treatment group, pivot the rows to columns, and finally use <code>mutate()</code> to create the difference between the means.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>trans <span class="sc">|&gt;</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(treat_ind) <span class="sc">|&gt;</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">nondiscrim_mean =</span> <span class="fu">mean</span>(nondiscrim_post)) <span class="sc">|&gt;</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> treat_ind,</span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> nondiscrim_mean</span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff_in_means =</span> <span class="st">`</span><span class="at">1</span><span class="st">`</span> <span class="sc">-</span> <span class="st">`</span><span class="at">0</span><span class="st">`</span></span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
    `0`   `1` diff_in_means
  &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;
1 0.648 0.687        0.0390</code></pre>
</div>
</div>
</section>
<section id="creating-new-labels-for-variables-to-make-nicer-tables" class="level3">
<h3 class="anchored" data-anchor-id="creating-new-labels-for-variables-to-make-nicer-tables">Creating new labels for variables to make nicer tables</h3>
<p>Above we had to use the backticks to refer to the 1/0 variable names when calculating the differences in means. We can create slightly nicer output by relabeling the <code>treat_ind</code> variable using <code>if_else</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>trans <span class="sc">|&gt;</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">treat_ind =</span> <span class="fu">if_else</span>(treat_ind <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"Treated"</span>, <span class="st">"Control"</span>)</span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span>  </span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(treat_ind) <span class="sc">|&gt;</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">nondiscrim_mean =</span> <span class="fu">mean</span>(nondiscrim_post)) <span class="sc">|&gt;</span></span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> treat_ind,</span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> nondiscrim_mean</span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb123-12"><a href="#cb123-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff_in_means =</span> Treated <span class="sc">-</span> Control</span>
<span id="cb123-13"><a href="#cb123-13" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  Control Treated diff_in_means
    &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;
1   0.648   0.687        0.0390</code></pre>
</div>
</div>
</section>
<section id="calculating-difference-in-means-by-two-level-grouping-variable" class="level3">
<h3 class="anchored" data-anchor-id="calculating-difference-in-means-by-two-level-grouping-variable">Calculating difference in means by two-level grouping variable</h3>
<p>If we have a two-level grouping variable like <code>democrat</code>, we can create nice labels for that variable and just add it to the <code>group_by</code> call to get the difference in means within levels of this variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>trans <span class="sc">|&gt;</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">treat_ind =</span> <span class="fu">if_else</span>(treat_ind <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"Treated"</span>, <span class="st">"Control"</span>),</span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">party =</span> <span class="fu">if_else</span>(democrat <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"Democrat"</span>, <span class="st">"Non-Democrat"</span>)</span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(treat_ind, party) <span class="sc">|&gt;</span></span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">nondiscrim_mean =</span> <span class="fu">mean</span>(nondiscrim_post)) <span class="sc">|&gt;</span></span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> treat_ind,</span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> nondiscrim_mean</span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span>  </span>
<span id="cb125-12"><a href="#cb125-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb125-13"><a href="#cb125-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff_in_means =</span> Treated <span class="sc">-</span> Control</span>
<span id="cb125-14"><a href="#cb125-14" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'treat_ind'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  party        Control Treated diff_in_means
  &lt;chr&gt;          &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;
1 Democrat       0.704   0.754        0.0498
2 Non-Democrat   0.605   0.628        0.0234</code></pre>
</div>
</div>
</section>
<section id="creating-grouping-variables-with-more-than-2-levels" class="level3">
<h3 class="anchored" data-anchor-id="creating-grouping-variables-with-more-than-2-levels">Creating grouping variables with more than 2 levels</h3>
<p>You can use <a href="https://dplyr.tidyverse.org/reference/case_when.html"><code>case_when()</code></a> to create a variable that can take on more than 2 values based on conditions of a variable in the tibble:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>trans <span class="sc">|&gt;</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&lt;</span> <span class="dv">25</span> <span class="sc">~</span> <span class="st">"Under 25"</span>,</span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span><span class="dv">25</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">65</span> <span class="sc">~</span> <span class="st">"Bewteen 25 and 65"</span>,</span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span> <span class="dv">65</span> <span class="sc">~</span> <span class="st">"Older than 65"</span></span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, age_group)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 565 × 2
     age age_group        
   &lt;dbl&gt; &lt;chr&gt;            
 1    29 Bewteen 25 and 65
 2    59 Bewteen 25 and 65
 3    35 Bewteen 25 and 65
 4    63 Bewteen 25 and 65
 5    65 Older than 65    
 6    51 Bewteen 25 and 65
 7    26 Bewteen 25 and 65
 8    62 Bewteen 25 and 65
 9    37 Bewteen 25 and 65
10    51 Bewteen 25 and 65
# ℹ 555 more rows</code></pre>
</div>
</div>
</section>
<section id="calculating-difference-in-mean-by-grouping-variable-with-more-than-2-levels" class="level3">
<h3 class="anchored" data-anchor-id="calculating-difference-in-mean-by-grouping-variable-with-more-than-2-levels">Calculating difference in mean by grouping variable with more than 2 levels</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>trans <span class="sc">|&gt;</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">treat_ind =</span> <span class="fu">if_else</span>(treat_ind <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"Treated"</span>, <span class="st">"Control"</span>),</span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&lt;</span> <span class="dv">25</span> <span class="sc">~</span> <span class="st">"Under 25"</span>,</span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span><span class="dv">25</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">65</span> <span class="sc">~</span> <span class="st">"Bewteen 25 and 65"</span>,</span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span> <span class="dv">65</span> <span class="sc">~</span> <span class="st">"Older than 65"</span></span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(treat_ind, age_group) <span class="sc">|&gt;</span></span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">nondiscrim_mean =</span> <span class="fu">mean</span>(nondiscrim_post)) <span class="sc">|&gt;</span></span>
<span id="cb130-12"><a href="#cb130-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb130-13"><a href="#cb130-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> treat_ind,</span>
<span id="cb130-14"><a href="#cb130-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> nondiscrim_mean</span>
<span id="cb130-15"><a href="#cb130-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span>  </span>
<span id="cb130-16"><a href="#cb130-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb130-17"><a href="#cb130-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff_in_means =</span> Treated <span class="sc">-</span> Control</span>
<span id="cb130-18"><a href="#cb130-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'treat_ind'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  age_group         Control Treated diff_in_means
  &lt;chr&gt;               &lt;dbl&gt;   &lt;dbl&gt;         &lt;dbl&gt;
1 Bewteen 25 and 65   0.694   0.683       -0.0112
2 Older than 65       0.576   0.614        0.0378
3 Under 25            0.556   0.829        0.273 </code></pre>
</div>
</div>
</section>
<section id="calculating-before-and-after-difference-in-means" class="level3">
<h3 class="anchored" data-anchor-id="calculating-before-and-after-difference-in-means">Calculating before and after difference in means</h3>
<p>When we’re estimating causal effects using a before and after design, we can usually create a variable that is the change in the outcome over time for each row and then take the mean of that. For example, in the newspapers data we have the vote for Labour outcome before the treatment (1992) and after (1997):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>newspapers <span class="sc">|&gt;</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(to_labour <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">vote_change =</span> vote_lab_97 <span class="sc">-</span> vote_lab_92</span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span>  </span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_change =</span> <span class="fu">mean</span>(vote_change))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  avg_change
       &lt;dbl&gt;
1      0.190</code></pre>
</div>
</div>
</section>
<section id="calculating-difference-in-differences-estimator" class="level3">
<h3 class="anchored" data-anchor-id="calculating-difference-in-differences-estimator">Calculating difference-in-differences estimator</h3>
<p>When you want to use the difference in differences estimator, you simply need to take the difference between the average changes over time in the treatment group (<code>to_labour == 1</code>) and the control group (<code>to_labour == 0</code>). We can do this by adding a <code>group_by</code> step:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>newspapers <span class="sc">|&gt;</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">vote_change =</span> vote_lab_97 <span class="sc">-</span> vote_lab_92,</span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">to_labour =</span> <span class="fu">if_else</span>(to_labour <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"switched"</span>, <span class="st">"unswitched"</span>)</span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(to_labour) <span class="sc">|&gt;</span>  </span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_change =</span> <span class="fu">mean</span>(vote_change)) <span class="sc">|&gt;</span></span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb135-9"><a href="#cb135-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> to_labour,</span>
<span id="cb135-10"><a href="#cb135-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> avg_change</span>
<span id="cb135-11"><a href="#cb135-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb135-12"><a href="#cb135-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">DID =</span> switched <span class="sc">-</span> unswitched)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  switched unswitched    DID
     &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;
1    0.190      0.110 0.0796</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>